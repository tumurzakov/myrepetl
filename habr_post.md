# –í–µ—á–µ—Ä–Ω–∏–π –≤–∞–π–±–∫–æ–¥–µ—Ä: MyRepETL ‚Äî ETL –¥–ª—è MySQL —á–µ—Ä–µ–∑ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é

–ü—Ä–∏–≤–µ—Ç, –∫–æ–ª–ª–µ–≥–∏! üëã 

–°–Ω–æ–≤–∞ —Å –≤–∞–º–∏ —Ä—É–±—Ä–∏–∫–∞ "–≤–µ—á–µ—Ä–Ω–∏–π –≤–∞–π–±–∫–æ–¥–µ—Ä", –∏ —Å–µ–≥–æ–¥–Ω—è —è –ø—Ä–∏–Ω—ë—Å –≤–∞–º **MyRepETL** ([c—Å—ã–ª–∫–∞ –Ω–∞ github](https://github.com/tumurzakov/myrepetl))‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è ETL —á–µ—Ä–µ–∑ MySQL —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é. 

## –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

–ó–∞–¥–∞—á–∞: —É –≤–∞—Å –∫—É—á–∞ MySQL –±–∞–∑ –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö, –Ω—É–∂–Ω–æ –≤—Å—ë —ç—Ç–æ –∑–∞—Ç–∞—â–∏—Ç—å –≤ **Metabase** –¥–ª—è –∫—Ä–∞—Å–∏–≤—ã—Ö –æ—Ç—á–µ—Ç–æ–≤. 

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ:
- –í –∫–∞–∂–¥–æ–π –±–∞–∑–µ —Å–≤–æ—è —Å—Ö–µ–º–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –î–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å
- Metabase –ª—é–±–∏—Ç –∫–æ–≥–¥–∞ –≤—Å—ë –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- –†—É—á–Ω–æ–π —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç ‚Äî —ç—Ç–æ –±–æ–ª—å

**MyRepETL** —Ä–µ—à–∞–µ—Ç —ç—Ç–æ: –±–µ—Ä—ë—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤—Å–µ—Ö –≤–∞—à–∏—Ö –±–∞–∑, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∏—Ö –Ω–∞ –ª–µ—Ç—É –∏ —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç –≤ –µ–¥–∏–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫—É—é –±–∞–∑—É –¥–ª—è Metabase.

## –ß—Ç–æ —É–º–µ–µ—Ç MyRepETL

### üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏—à–∫–∏

**–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –∏–∑ –∫–æ—Ä–æ–±–∫–∏**
- –ö–∞–∂–¥—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–≤–æ—ë–º –ø–æ—Ç–æ–∫–µ
- –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–±–æ—è—Ö

**–ì–∏–±–∫–∏–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏**
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –∫–æ–ª–æ–Ω–æ–∫
- –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ Python-—Ñ—É–Ω–∫—Ü–∏–∏

**JSON-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
- –í—Å—ë –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ü—Ä–æ—Å—Ç–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–°–∞–º—ã–π –±–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π ‚Äî –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–¥–Ω–æ–π –±–∞–∑—ã –≤ –¥—Ä—É–≥—É—é:

```json
{
  "sources": {
    "prod_db": {
      "host": "prod-mysql",
      "user": "repl_user", 
      "password": "repl_pass",
      "database": "production"
    }
  },
  "targets": {
    "backup_db": {
      "host": "backup-mysql",
      "user": "backup_user",
      "password": "backup_pass", 
      "database": "backup"
    }
  },
  "mapping": {
    "prod_db.users": {
      "source": "prod_db",
      "target": "backup_db",
      "source_table": "users",
      "target_table": "users"
    }
  }
}
```

### –° —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è–º–∏

–ê —Ç–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–∏–º –º–∞–≥–∏—é ‚Äî –ø–µ—Ä–µ–∏–º–µ–Ω—É–µ–º —Ç–∞–±–ª–∏—Ü—É, –¥–æ–±–∞–≤–∏–º –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è:

```json
{
  "mapping": {
    "prod_db.customers": {
      "source": "prod_db",
      "target": "analytics_db",
      "source_table": "customers",
      "target_table": "users",
      "column_mapping": {
        "id": {"column": "user_id"},
        "name": {"column": "full_name"},
        "email": {"column": "email"},
        "birth_date": {"column": "age", "transform": "transform.calculate_age"},
        "phone": {"column": "formatted_phone", "transform": "transform.format_phone"},
        "created_at": {"column": "registration_date"},
        "source": {"column": "source_system", "value": "production"}
      }
    }
  }
}
```

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `transform.py` —Å –≤–∞—à–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏:

```python
# transform.py
def calculate_age(birth_date, row_data, table):
    from datetime import datetime
    if not birth_date:
        return None
    birth = datetime.strptime(birth_date, '%Y-%m-%d')
    return (datetime.now() - birth).days // 365

def format_phone(phone, row_data, table):
    if not phone:
        return None
    # 79991234567 -> +7 (999) 123-45-67
    return f"+7 ({phone[1:4]}) {phone[4:7]}-{phone[7:9]}-{phone[9:11]}"
```

### –ó–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å GitHub
pip install git+https://github.com/tumurzakov/myrepetl.git

# –ò–ª–∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
git clone https://github.com/tumurzakov/myrepetl.git
cd myrepetl
pip install -e .

# –ó–∞–ø—É—Å–∫ —Å –∫–æ–Ω—Ñ–∏–≥–æ–º
myrepetl run config.json

# –ò–ª–∏ —á–µ—Ä–µ–∑ Docker
docker run -v ./config.json:/app/config.json myrepetl:latest
```

*–ù–∞ —ç—Ç–æ–º –≤—Å—ë, —É–¥–∞—á–Ω–æ–≥–æ –∫–æ–¥–∏–Ω–≥–∞! üë®‚Äçüíª*
