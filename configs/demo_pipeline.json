{
  "name": "demo_etl_pipeline",
  "sources": [
    {
      "name": "demo_source",
      "host": "localhost",
      "port": 3306,
      "user": "replication_user",
      "password": "replication_password",
      "database": "demo_source_db",
      "tables": [
        "users",
        "orders",
        "products"
      ],
      "server_id": 100,
      "auto_position": true,
      "charset": "utf8mb4"
    }
  ],
  "target_tables": [
    {
      "name": "users",
      "database": "demo_target_db",
      "fields": [
        {
          "name": "id",
          "field_type": "integer",
          "length": null,
          "nullable": false,
          "default_value": null,
          "primary_key": true,
          "auto_increment": true
        },
        {
          "name": "name",
          "field_type": "varchar",
          "length": 255,
          "nullable": true,
          "default_value": null,
          "primary_key": false,
          "auto_increment": false
        },
        {
          "name": "email",
          "field_type": "varchar",
          "length": 255,
          "nullable": true,
          "default_value": null,
          "primary_key": false,
          "auto_increment": false
        },
        {
          "name": "status",
          "field_type": "varchar",
          "length": 50,
          "nullable": true,
          "default_value": null,
          "primary_key": false,
          "auto_increment": false
        },
        {
          "name": "created_at",
          "field_type": "datetime",
          "length": null,
          "nullable": true,
          "default_value": null,
          "primary_key": false,
          "auto_increment": false
        }
      ],
      "indexes": [],
      "engine": "InnoDB",
      "charset": "utf8mb4"
    },
    {
      "name": "orders",
      "database": "demo_target_db",
      "fields": [
        {
          "name": "id",
          "field_type": "integer",
          "length": null,
          "nullable": false,
          "default_value": null,
          "primary_key": true,
          "auto_increment": true
        },
        {
          "name": "user_id",
          "field_type": "integer",
          "length": null,
          "nullable": true,
          "default_value": null,
          "primary_key": false,
          "auto_increment": false
        },
        {
          "name": "product_id",
          "field_type": "integer",
          "length": null,
          "nullable": true,
          "default_value": null,
          "primary_key": false,
          "auto_increment": false
        },
        {
          "name": "amount",
          "field_type": "decimal",
          "length": "10,2",
          "nullable": true,
          "default_value": null,
          "primary_key": false,
          "auto_increment": false
        },
        {
          "name": "order_date",
          "field_type": "datetime",
          "length": null,
          "nullable": true,
          "default_value": null,
          "primary_key": false,
          "auto_increment": false
        },
        {
          "name": "status",
          "field_type": "varchar",
          "length": 50,
          "nullable": true,
          "default_value": null,
          "primary_key": false,
          "auto_increment": false
        }
      ],
      "indexes": [],
      "engine": "InnoDB",
      "charset": "utf8mb4"
    },
    {
      "name": "products",
      "database": "demo_target_db",
      "fields": [
        {
          "name": "id",
          "field_type": "integer",
          "length": null,
          "nullable": false,
          "default_value": null,
          "primary_key": true,
          "auto_increment": true
        },
        {
          "name": "name",
          "field_type": "varchar",
          "length": 255,
          "nullable": true,
          "default_value": null,
          "primary_key": false,
          "auto_increment": false
        },
        {
          "name": "description",
          "field_type": "text",
          "length": null,
          "nullable": true,
          "default_value": null,
          "primary_key": false,
          "auto_increment": false
        },
        {
          "name": "price",
          "field_type": "decimal",
          "length": "10,2",
          "nullable": true,
          "default_value": null,
          "primary_key": false,
          "auto_increment": false
        },
        {
          "name": "category",
          "field_type": "varchar",
          "length": 100,
          "nullable": true,
          "default_value": null,
          "primary_key": false,
          "auto_increment": false
        }
      ],
      "indexes": [],
      "engine": "InnoDB",
      "charset": "utf8mb4"
    }
  ],
  "transformation_rules": [
    {
      "name": "users_transform",
      "source_table": "users",
      "target_table": "users",
      "field_mappings": [
        {
          "source_field": "id",
          "target_field": "id",
          "transformation": null
        },
        {
          "source_field": "name",
          "target_field": "name",
          "transformation": "uppercase_transform"
        },
        {
          "source_field": "email",
          "target_field": "email",
          "transformation": "lowercase_transform"
        },
        {
          "source_field": "status",
          "target_field": "status",
          "transformation": null
        },
        {
          "source_field": "created_at",
          "target_field": "created_at",
          "transformation": null
        }
      ],
      "filters": [
        "{status} != 'deleted'"
      ],
      "operations": [
        "insert",
        "update",
        "delete"
      ]
    },
    {
      "name": "orders_transform",
      "source_table": "orders",
      "target_table": "orders",
      "field_mappings": [
        {
          "source_field": "id",
          "target_field": "id",
          "transformation": null
        },
        {
          "source_field": "user_id",
          "target_field": "user_id",
          "transformation": null
        },
        {
          "source_field": "product_id",
          "target_field": "product_id",
          "transformation": null
        },
        {
          "source_field": "amount",
          "target_field": "amount",
          "transformation": null
        },
        {
          "source_field": "order_date",
          "target_field": "order_date",
          "transformation": null
        },
        {
          "source_field": "status",
          "target_field": "status",
          "transformation": "uppercase_transform"
        }
      ],
      "filters": [
        "{amount} > 0"
      ],
      "operations": [
        "insert",
        "update",
        "delete"
      ]
    },
    {
      "name": "products_transform",
      "source_table": "products",
      "target_table": "products",
      "field_mappings": [
        {
          "source_field": "id",
          "target_field": "id",
          "transformation": null
        },
        {
          "source_field": "name",
          "target_field": "name",
          "transformation": "uppercase_transform"
        },
        {
          "source_field": "description",
          "target_field": "description",
          "transformation": null
        },
        {
          "source_field": "price",
          "target_field": "price",
          "transformation": null
        },
        {
          "source_field": "category",
          "target_field": "category",
          "transformation": "uppercase_transform"
        }
      ],
      "filters": [],
      "operations": [
        "insert",
        "update",
        "delete"
      ]
    }
  ]
}